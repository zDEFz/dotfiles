server:
    # --- Networking ---
    interface: 127.0.0.1
    port: 53
    do-ip4: yes
    do-ip6: no
    do-udp: yes
    do-tcp: yes

    # --- Access Control ---
    access-control: 127.0.0.0/8 allow
    access-control: ::1 allow

    # --- Performance (Tuned for your 186GB Rig) ---
    num-threads: 4
    msg-cache-slabs: 8
    rrset-cache-slabs: 8
    infra-cache-slabs: 8
    key-cache-slabs: 8
    
    # Large caches for your RAM
    rrset-cache-size: 512m
    msg-cache-size: 256m
    
    # --- Privacy & Security ---
    hide-identity: yes
    hide-version: yes
    harden-glue: yes
    harden-dnssec-stripped: yes
    use-caps-for-id: yes
    prefetch: yes
    edns-buffer-size: 1232

    # --- The "No-Disconnect" Logic ---
    do-not-query-localhost: no
    
    # Fix for the "Invisible File" Error: 
    # This disables the jail so Unbound can see /etc/unbound/
    chroot: ""
    
    module-config: "validator iterator"
    
    # Use the filenames exactly as shown in your 'ls' output
    root-hints: "/etc/unbound/root.hints"
    auto-trust-anchor-file: "/etc/unbound/root.key"

remote-control:
    control-enable: yes
    control-interface: 127.0.0.1
    control-port: 8953
    # Use the absolute paths now that we fixed permissions
    server-key-file: "/etc/unbound/unbound_server.key"
    server-cert-file: "/etc/unbound/unbound_server.pem"
    control-key-file: "/etc/unbound/unbound_control.key"
    control-cert-file: "/etc/unbound/unbound_control.pem"
