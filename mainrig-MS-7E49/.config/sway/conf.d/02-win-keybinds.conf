# 02-win-keybinds.conf
$bm { 
    # Resizing (Meta + Ctrl)
    $meta+Ctrl+Down     resize  shrink   height  100 px or 100 ppt
    $meta+Ctrl+Left     resize  grow     width   100 px or 100 ppt
    $meta+Ctrl+Right    resize  shrink   width   100 px or 100 ppt
    $meta+Ctrl+Up       resize  grow     height  100 px or 100 ppt

    # Navigation & Layout
    $meta+Up            focus up
    $meta+Down          focus down

    # Layout Styles
    $meta+s             exec swaymsg layout stacking \
        && notify-send "Sway Layout" "Mode: Stacking" \
        && pw-play "$HOME/audio/FX/freesound.org/585587__therealisa__pokerchip_pokerchip_stacking_twice.flac"

    $meta+t             exec swaymsg layout tabbed \
        && notify-send "Sway Layout" "Mode: Tabbed" \
        && pw-play "$HOME/audio/FX/freesound.org/585596__therealisa__pokerchip_table_bounce2_short.flac"

    # Split Directions (Pre-selection)
    $meta+h             exec swaymsg split h \
        && notify-send "Sway Split" "Direction: Horizontal" \
        && pw-play "$HOME/audio/FX/freesound.org/585579__therealisa__pokerchip_pokerchip_click4.flac"

    $meta+v             exec swaymsg split v \
        && notify-send "Sway Split" "Direction: Vertical" \
        && pw-play "/home/blu/audio/FX/freesound.org/585582__therealisa__pokerchip_pokerchip_click_rattle.flac"

    # Toggle Logic
    $meta+e             exec swaymsg layout toggle \
        && notify-send "Sway Layout" "Toggled Split" \
        && pw-play "$HOME/audio/FX/freesound.org/585602__therealisa__pokerchip_table_rattle_drop.flac"

    # Scratchpad
    $meta+equal         scratchpad show

    # Fullscreen Toggle
    $meta+f fullscreen  toggle

# KEYPAD_START
    # Static bindings that call the script with the key number and the starting workspace
    Control+KP_1        exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 1 1
    Control+KP_2        exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 2 1
    Control+KP_3        exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 3 1
    Control+KP_4        exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 4 1
    Control+KP_5        exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 5 1
    Control+KP_6        exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 6 1
    Control+KP_7        exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 7 1
    Control+KP_8        exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 8 1
    Control+KP_9        exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 9 1

    $meta+KP_1          exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 1 55
    $meta+KP_2          exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 2 55
    $meta+KP_3          exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 3 55
    $meta+KP_4          exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 4 55
    $meta+KP_5          exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 5 55
    $meta+KP_6          exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 6 55
    $meta+KP_7          exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 7 55
    $meta+KP_8          exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 8 55
    $meta+KP_9          exec ~/.config/sway/scripts/sway_numpad_workspace_monitor_sync.sh 9 55
    # KEYPAD_END

    # Focus and Move
    $meta+Left          focus left
    $meta+Right         focus right
    $meta+Shift+g       floating toggle, resize set 1280px 1024px
    $meta+Shift+minus   move scratchpad
    
    # Toggle Floating
    $meta+Shift+space   floating toggle

    # Move to Output
    $meta+Shift+Left    exec swaymsg 'mark temp_move; move container to output left; [con_mark="temp_move"] focus; unmark temp_move'
    $meta+Shift+Right   exec swaymsg 'mark temp_move; move container to output right; [con_mark="temp_move"] focus; unmark temp_move'
    $meta+Shift+Up      exec swaymsg 'mark temp_move; move container to output up; [con_mark="temp_move"] focus; unmark temp_move'
    $meta+Shift+Down    exec swaymsg 'mark temp_move; move container to output down; [con_mark="temp_move"] focus; unmark temp_move'

    # $meta+Tab workspace back_and_forth
    $meta+Tab [con_mark=_prev] focus

    # Sticky Toggle
    $meta+x exec 'swaymsg sticky toggle'

    # Close Window
    Control+q kill

    # Menu Focus (Menu + Control)
    Menu+Control+Down   move down, focus down
    Menu+Control+Left   $mtol, focus output left
    Menu+Control+Right  $mtor, focus output right
    Menu+Control+space  floating toggle
    Menu+Control+Up     $mu, focus up
    Menu+Left $fl
    Menu+Right $fr
    Menu+Up $fu
}

# bindsym F12 exec xprop > ~/Downloads/xprop.log
$bm {
    F12                 exec flock -n /dev/shm/wofi.lock swayr switch-window
--inhibited --to-code    F11                 exec bash -c 'S=/dev/shm/sway_focus_out; T=/dev/shm/sway_focus_time; now=$(( $(date +%s%N) / 1000000 )); last=$(cat $T 2>/dev/null || echo 0); (( now - last < 200 )) && exit; echo $now > $T; if [[ "$(cat $S 2>/dev/null)" == "up" ]]; then swaymsg focus output down; echo down > $S; else swaymsg focus output up; echo up > $S; fi'
}
